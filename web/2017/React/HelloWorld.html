<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>React</title>
  <!-- React -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.1/react.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.1/react-dom.min.js"></script>
  <!-- Babel是一个将ES6转换到ES5的库 -->
  <script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script>
</head>
<body>
  <div id="hello"></div>
  <div id="hello2"></div>
  <div id="app"></div>
  <div id="app2"></div>

  <script type="text/babel">
    
    // Hello World 栗子

    ReactDOM.render(
      <h1>Hello world</h1>,
      document.querySelector('#hello')
    );

    // Hello World 栗子

    var app = <h1>Hello world</h1>
    var mountComponent = document.querySelector('#hello2');
    ReactDOM.render(app, mountComponent);

    // React 组件 ES6类表示 栗子

    class App extends React.Component {
      render() {
        return <h1>Hello from our app</h1>
      }
    }

    var mount = document.querySelector('#app');
    ReactDOM.render(<App />, mount);

    // React 组件 React.createClass()函数 栗子

    var App2 = React.createClass({
      render: function() {
        return <h1>Hello from our app2</h1>
      }
    });

    var mount2 = document.querySelector('#app2');
    ReactDOM.render(<App2 />, mount2);

    // 组件小结

    // React 组件 至少需要一个render() 函数
    // render() 函数应返回浏览器DOM元素的虚拟DOM表示形式
    // React 组件 通过 ReactDOM.render() 函数呈现应用

  </script>

  <div id="AppBody"></div>

  <script type="text/babel">

    // 容器组件

    class AppBody extends React.Component {
      render() {
        return (
          <div className="notificationsFrame">
            <div className="panel">
              <Header title="Timeline" />
              <Content activities={activities} />
              <ContentOne activities={activities} />
            </div>
          </div>
        )
      }
    }

    // 数据

    const activities = [
      {
        timestamp: new Date().toLocaleString(),
        text: "Ate lunch",
        user: {
          id: 1,
          name: 'Nate',
          avatar: "http://www.croop.cl/UI/twitter/images/doug.jpg"
        },
        comments: [{ 
          from: 'Ari',
          text: 'Me too!'
        }]
      },
      {
        timestamp: new Date().toLocaleString(),
        text: "Woke up early for a beautiful run",
        user: {
          id: 2, name: 'Ari',
          avatar: "http://www.croop.cl/UI/twitter/images/doug.jpg"
        },
        comments: [{ from: 'Nate', text: 'I am so jealous' }]
      },
    ]

    // 子组件 Header

    class Header extends React.Component {
      render() {
        return (
          <div className="header">
            <div className="menuIcon">
              <div className="dashTop"></div>
              <div className="dashBottom"></div>
              <div className="circle"></div>
            </div>

            <span className="title">
              {this.props.title}
            </span>
    
            <input
              type="text"
              className="searchInput"
              placeholder="Search ..." />
    
            <div className="fa fa-search searchIcon"></div>
          </div>
        )
      }
    }

    // 子组件 Content

    class Content extends React.Component {
      render() {
        const { activity } = this.props;  // ES6 语法

        return (
          <div className="content">
            <div className="line"></div>

            {/* Timeline item */}
            {activities.map((activity) => {
              return (
                <div className="item">
                  <div className="avatar">
                    <img 
                    alt={activity.text}
                    src={activity.user.avatar} />
                    {activity.user.name}
                  </div>

                  <span className="time">
                    {activity.timestamp}
                  </span>

                  <p>{activity.text}</p>
                  <div className="commentCount">
                    {activity.comments.length}
                  </div>
                </div>
              );
            })}

          </div>
        )
      }
    }

    // 子组件 ContentOne

    class ContentOne extends React.Component {
      render() {
        const {activities} = this.props; // ES6 destructuring

        return (
          <div className="content">
            <div className="line"></div>

            {/* Timeline item */}
            {activities.map((activity) => (
              <ActivityItem
                activity={activity} />
            ))}

          </div>
        )
      }
    }

    // 子组件 ActivityItem

    class ActivityItem extends React.Component {
      render() {
        const {activity} = this.props; // ES6 destructuring

        return (
          <div className="item">
            <div className="avatar">
              <img 
                alt={activity.text} 
                src={activity.user.avatar} />
              {activity.user.name}
            </div>

            <span className="time">
              {activity.timestamp}
            </span>
            <p>{activity.text}</p>
            <div className="commentCount">
              {activity.comments.length}
            </div>
          </div>
        )
      }
    }

    var mount3 = document.querySelector('#AppBody');
    ReactDOM.render(<AppBody />, mount3);

  </script>
</body>
</html>