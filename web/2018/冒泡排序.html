<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>JS冒泡排序优化</title>
</head>
<body>

<div>排序数组[3,4,2,1,5,6,7,8]</div>
<br>
<button onclick="coci([3,4,2,1,5,6,7,8]);">标准测试</button>
<button onclick="coci2([3,4,2,1,5,6,7,8]);">优化1测试</button>
<button onclick="coci3([3,4,2,1,5,6,7,8]);">优化2测试</button>
<div id="div"></div>

<script type="text/javascript">
var div = document.getElementById('div');
function coci(arr) {
	
	var tmp,   // 临时变量
	    len = arr.length,  // 数组长度
	    text = '';
	for(var i = 0; i < len; i++){
	    text +='<br>外第'+i+'次:'+arr;
	    for(var j = 0;  j < len-1; j++){
	        if ( arr[j] > arr[j+1] ) {
	            tmp = arr[j];
	            arr[j] = arr[j+1];
	            arr[j+1] = tmp;
	        }
	        text +='<br>--内第'+j+'次:'+arr;
	    }
	}

	div.innerHTML=text;
}

function coci2(arr) {

	var tmp,   // 临时变量
		sign, // 是否交换标志
	    len = arr.length,  // 数组长度
	    text = '';
	for(var i = 0; i < len; i++){
		
		sign  = false;
	    
	    text +='<br>外第'+i+'次:'+arr;
	    for(var j = 0;  j < len-1; j++){
	        if ( arr[j] > arr[j+1] ) {
	            tmp = arr[j];
	            arr[j] = arr[j+1];
	            arr[j+1] = tmp;
	            sign = true;
	        }
	        text +='<br>--内第'+j+'次:'+arr;
	    }
	    if (!sign) break;
	}

	div.innerHTML=text;
}

function coci3(arr) {

	var tmp,   // 临时变量
		sign, // 是否交换标志
		endindex,
	    len = arr.length,  // 数组长度
	    end = arr.length-1,
	    text = '';
	for(var i = 0; i < len; i++){
		
		sign  = true;
	    
	    text +='<br>外第'+i+'次:'+arr;
	    for(var j = 0;  j < end; j++){
	        if ( arr[j] > arr[j+1] ) {
	            tmp = arr[j];
	            arr[j] = arr[j+1];
	            arr[j+1] = tmp;
	            sign = false;
	            endindex = j+1;
	        }
	        text +='<br>--内第'+j+'次:'+arr;
	    }
	    end = endindex;
	    if (sign) break;
	}

	div.innerHTML=text;
}


</script>

</body>
</html>