<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 01</title>
  </head>
<body>

  <label>请输入北京今天空气质量：<input id="aqi-input" type="text"></label>
  <button id="button">确认填写</button>

  <div>您输入的值是：<span id="aqi-display">尚无录入</span></div>

  <label>请输入北京今天空气质量：<input id="text" type="text"></label>
  <button id="an">确认填写</button>

  <div>您输入的值是：<span id="zhi">尚无录入</span></div>

<script type="text/javascript">

(function() {
  /*	
  在注释下方写下代码
  给按钮button绑定一个点击事件
  在事件处理函数中
  获取aqi-input输入的值，并显示在aqi-display中
  */
   function hidder(){
      var num = document.getElementById('aqi-input').value;
      var ic = parseInt(num)
      if ((ic>=0)&&(ic<=1000))
      {
        document.getElementById('aqi-display').innerHTML= ic;
      }
      else
      {
        alert(num+' 不是有效值，请输入0-1000的有效数值！')
      }
  };

  document.getElementById('button').onclick = function(){
    hidder();
  }

  document.getElementById('aqi-input').onkeyup = function(event){
    if(event.keyCode === 13){
      hidder();
    }
  }

})();

(function(){

  var $ = function (id) {
    return document.getElementById(id);
  }

  var haide = function(){
          var aac = parseInt($('text').value);
          if ((!isNaN(aac))&&(aac>=0)&&(aac<=1000))
          {
            $('zhi').innerHTML = aac;
          }
          else
          {
            alert($('text').value+' 不是有效值，请输入0-1000的有效数值！')
          }
  }

  $('an').onclick = function()
  {
    haide();
  }

  $('text').onkeyup = function(event)
  {
    if (event.keyCode === 13) 
    {
      haide();
    }
  }
})();

</script>


<h3>污染城市列表</h3>
<ul id="aqi-list">
    <!--
        <li>第一名：福州（样例），10</li>
          <li>第二名：福州（样例），10</li> -->
</ul>

<script type="text/javascript">
    var aqiData = [
        ["北京", 90],
        ["上海", 50],
        ["福州", 10],
        ["广州", 50],
        ["成都", 90],
        ["西安", 100]
    ];
    (function () {
        /*
         在注释下方编写代码
         遍历读取aqiData中各个城市的数据
         将空气质量指数大于60的城市显示到aqi-list的列表中
         */
        var oList = document.getElementById("aqi-list");
        var arr = ["一","二","三","四","五"];
        //sort 从大到小
        aqiData.sort(function(a,b){
          return b[1]-a[1];
        });
        oList.innerHTML = "";
        for(var i=0;i<aqiData.length;i++){
          
          if(aqiData[i][1]>60){
            var oLi = document.createElement("li");
            oLi.innerHTML = '第'+arr[i]+'名：'+aqiData[i][0]+','+aqiData[i][1];
            oList.appendChild(oLi);
          }
        }
    })();
</script>


<h3>污染城市列表</h3>
<ul id="ul">
    <!--
        <li>第一名：福州（样例），10</li>
          <li>第二名：福州（样例），10</li> -->
</ul>

<script type="text/javascript">
    var aqiData = [
        ["北京", 90],
        ["上海", 50],
        ["福州", 10],
        ["广州", 50],
        ["成都", 90],
        ["西安", 100]
    ];
    (function () {
        /*
         在注释下方编写代码
         遍历读取aqiData中各个城市的数据
         将空气质量指数大于60的城市显示到aqi-list的列表中
         */

        //定义获取ID和名次
        var $ = function(id){ return document.getElementById(id); }
        var abc = ["一","二","三","四","五"];

        //把数组从大到小排序
        aqiData.sort(function(a,b){ return b[1] - a[1] });

        //清空ul
        $('ul').innerHTML = "";

        //循环遍历数值>60的数组，并按指定格式输出
        for(var i=0;i < aqiData.length;i++)
        {
          if (aqiData[i][1]>60)
          {
            var oli = document.createElement("li");
            oli.innerHTML = "第"+abc[i]+"名："+aqiData[i][0]+","+aqiData[i][1];
            $('ul').appendChild(oli);
          }
        }
    })();
</script>

<ul id="source">
    <li>北京空气质量：<b>90</b></li>
    <li>上海空气质量：<b>70</b></li>
    <li>天津空气质量：<b>80</b></li>
    <li>广州空气质量：<b>50</b></li>
    <li>深圳空气质量：<b>40</b></li>
    <li>福州空气质量：<b>32</b></li>
    <li>成都空气质量：<b>90</b></li>
  </ul>

  <ul id="resort">
    <!--
    <li>第一名：北京空气质量：<b>90</b></li>
    <li>第二名：北京空气质量：<b>90</b></li>
    <li>第三名：北京空气质量：<b>90</b></li>
     -->
  </ul>

  <button id="sort-btn">排序</button>

<script type="text/javascript">
/**
 * getData方法
 * 读取id为source的列表，获取其中城市名字及城市对应的空气质量
 * 返回一个数组，格式见函数中示例
 */
function getData() {
  /*
  coding here
  */
    var data = new Array;
    var ul = document.getElementById("source");
    var li = ul.getElementsByTagName("li");
    var b  = document.getElementsByTagName("b");
    for(var i=0;i<li.length;i++){
        data[i] = [];
        data[i].push(li[i].innerHTML.substr(0,2));
        data[i].push(parseInt(b[i].innerHTML));
    }
  /*
  data = [
    ["北京", 90],
    ["北京", 90]
    ……
  ]
  */
  return data;
}
/**
 * sortAqiData
 * 按空气质量对data进行从小到大的排序
 * 返回一个排序后的数组
 */
function sortAqiData(data) {
    data.sort(function(a,b){
        return b[1] - a[1];
    })
    return data;
}
/**
 * render
 * 将排好序的城市及空气质量指数，输出显示到id位resort的列表中
 * 格式见ul中的注释的部分
 * <li>第三名：北京空气质量：<b>90</b></li>
 */
function render(data) {
    var num = ["一","二","三","四","五","六","七"]
    var resort = document.getElementById("resort");
    for(var i=0;i<data.length;i++){
        resort.innerHTML
            += "<li>第"
            + num[i]
            + "名:"
            + data[i][0]
            + "空气质量："
            + "<b>"
            + data[i][1]
            + "</b>"
            + "</li>";
    }
}
function btnHandle() {
  var aqiData = getData();
  aqiData = sortAqiData(aqiData);
  render(aqiData);
}
function init() {
    var btn = document.getElementById("sort-btn");
  // 在这下面给sort-btn绑定一个点击事件，点击时触发btnHandle函数
    btn.addEventListener("click",function(){
        btnHandle();
    },false);
}
init();
</script>


  <ul id="ul_a">
    <li>北京空气质量：<b>90</b></li>
    <li>上海空气质量：<b>70</b></li>
    <li>天津空气质量：<b>80</b></li>
    <li>广州空气质量：<b>50</b></li>
    <li>深圳空气质量：<b>40</b></li>
    <li>福州空气质量：<b>32</b></li>
    <li>成都空气质量：<b>90</b></li>
  </ul>

  <ul id="ul_b">
    <!-- 
    <li>第一名：北京空气质量：<b>90</b></li>
    <li>第二名：北京空气质量：<b>90</b></li>
    <li>第三名：北京空气质量：<b>90</b></li>
     -->

  </ul>

  <button id="buttoner">排序</button>

<script type="text/javascript">

/**
 * getData方法
 * 读取id为source的列表，获取其中城市名字及城市对应的空气质量
 * 返回一个数组，格式见函数中示例
 */
function getDate() {
  /*
  coding here
  */
  var date = [];
  var a = document.getElementById('ul_a');
  var c = ul.getElementsByTagName('li');
  var b = document.getElementsByTagName('b');
  for(var i=0;i<c.length;i++)
  {
      date[i]= [];
      date[i].push(c[i].innerHTML.substr(0,2));
      date[i].push(parseInt(b[i].innerHTML));
  }
  /*
  data = [
    ["北京", 90],
    ["北京", 90]
    ……
  ]
  */

  return date;

}

/**
 * sortAqiData
 * 按空气质量对data进行从小到大的排序
 * 返回一个排序后的数组
 */
function sortAqiDate(data) {
  date.sort(function(a,b){
    return b[1] - a[1];
  });
  return date;
}

/**
 * render
 * 将排好序的城市及空气质量指数，输出显示到id位resort的列表中
 * 格式见ul中的注释的部分
 */
function render(data) {

}

function btnHandla() {
  var aqiData = getDate();
  aqiData = sortAqiDate(aqiData);
  render(aqiData);
}


function inic() {

  // 在这下面给sort-btn绑定一个点击事件，点击时触发btnHandle函数
  var btt = document.getElementById('buttoner');
  btt.addEventListener('click',function(){ btnHandla(); });

}

inic();

</script>



</body>
</html>